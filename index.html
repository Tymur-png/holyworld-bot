<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>CosmoPunk Tap Game</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
:root{
  --bg:#0a001a;
  --accent1:#ff00ff;
  --accent2:#00ffff;
  --accent3:#ff00aa;
  --panel:rgba(30,10,50,0.45);
  --panel-dark:rgba(15,5,30,0.7);
  --glow1:0 0 40px rgba(255,0,255,0.5);
  --glow2:0 0 40px rgba(0,255,255,0.5);
  --text:#e0e0ff;
  --text-dim:#a0a0ee;
}
*{margin:0;padding:0;box-sizing:border-box}
body{
  background:radial-gradient(circle at top,#2a0055,#0a001a);
  font-family:'Segoe UI',Arial,sans-serif;
  color:var(--text);
  overflow:hidden;
  height:100vh;
}
#app{height:100vh;position:relative}

/* HUD */
#hud{
  position:absolute;top:12px;left:12px;right:12px;
  display:flex;justify-content:space-between;align-items:flex-start;z-index:10;
  pointer-events:none;
}
.badge{
  background:var(--panel);
  padding:10px 18px;
  border-radius:20px;
  backdrop-filter:blur(12px);
  border:1px solid rgba(255,255,255,0.12);
  font-weight:700;
  font-size:18px;
  box-shadow:var(--glow1);
  pointer-events:auto;
}
#punk-badge{box-shadow:var(--glow1);}
#income-badge{box-shadow:var(--glow2);font-size:15px;}
#rank{
  font-size:14px;
  opacity:0.85;
  margin-top:6px;
  text-align:center;
}

/* Reactor */
#center{
  position:absolute;inset:0;
  display:flex;align-items:center;justify-content:center;
}
#reactor{
  width:340px;height:340px;
  border-radius:50%;
  background:radial-gradient(circle,var(--panel-dark),transparent);
  box-shadow:var(--glow1), var(--glow2);
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;
  transition:transform 0.15s;
  border:3px solid rgba(255,0,255,0.35);
}
#reactor:active{transform:scale(0.93);}
#reactor.tap{animation:pulse 0.4s ease-out;}
@keyframes pulse{
  0%{transform:scale(1);}
  50%{transform:scale(1.12);}
  100%{transform:scale(1);}
}
#reactor img{width:94%;border-radius:50%;}

/* Floating */
.float{
  position:absolute;
  font-size:34px;
  font-weight:900;
  pointer-events:none;
  text-shadow:0 0 20px var(--accent2);
  animation:floatUp 1.4s ease-out forwards;
}
.float.crit{
  color:#ff00ff;
  font-size:48px;
  text-shadow:0 0 30px #ff00ff;
}
@keyframes floatUp{
  0%{transform:translateY(0) scale(1);opacity:1}
  100%{transform:translateY(-160px) scale(1.3);opacity:0}
}

/* Bottom bar */
#bottom{
  position:absolute;bottom:0;left:0;right:0;
  padding:12px;
  background:linear-gradient(transparent,var(--bg));
  z-index:10;
}
#bar{
  display:flex;
  gap:12px;
  overflow-x:auto;
  padding-bottom:8px;
}
.btn{
  min-width:100px;
  background:var(--panel-dark);
  border:1px solid rgba(255,255,255,0.18);
  padding:14px 18px;
  border-radius:22px;
  font-weight:700;
  font-size:15px;
  cursor:pointer;
  transition:all 0.25s;
  text-align:center;
  box-shadow:var(--glow1);
}
.btn:active{
  transform:scale(0.94);
  box-shadow:0 0 25px var(--accent1);
}

/* Popup */
#pop{
  position:fixed;inset:0;
  background:rgba(0,0,0,0.92);
  display:none;
  align-items:center;justify-content:center;
  z-index:100;
  backdrop-filter:blur(10px);
}
#card{
  background:var(--panel-dark);
  border:2px solid var(--accent1);
  padding:28px;
  border-radius:28px;
  max-width:94%;
  max-height:94%;
  overflow-y:auto;
  box-shadow:0 0 80px rgba(255,0,255,0.5);
}
h2{
  text-align:center;
  font-size:30px;
  margin-bottom:24px;
  background:linear-gradient(to right,var(--accent1),var(--accent2));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.item{
  background:var(--panel);
  border:1px solid rgba(255,255,255,0.12);
  border-radius:20px;
  padding:18px;
  margin-bottom:16px;
  display:flex;
  gap:18px;
  align-items:center;
  transition:transform 0.25s, box-shadow 0.25s;
}
.item:hover{transform:scale(1.03); box-shadow:var(--glow1);}
.item img{
  width:84px;height:84px;
  object-fit:contain;
  border-radius:14px;
  border:2px solid var(--accent2);
}
.item-info{flex:1}
.item-name{font-weight:700;font-size:19px;margin-bottom:8px;color:var(--accent1)}
.item-desc{font-size:14px;opacity:0.88;line-height:1.5}
.buy-btn{
  background:linear-gradient(135deg,var(--accent1),var(--accent3));
  color:white;
  border:none;
  padding:12px 24px;
  border-radius:18px;
  font-weight:700;
  font-size:15px;
  cursor:pointer;
  box-shadow:0 0 20px rgba(255,0,255,0.4);
}
.buy-btn:disabled{
  background:#444;
  opacity:0.5;
  cursor:not-allowed;
  box-shadow:none;
}
</style>
</head>

<body>
<div id="app">

<div id="hud">
  <div>
    <div id="punk-badge" class="badge">0 PUNK</div>
    <div id="rank">Street Rat</div>
  </div>
  <div id="income-badge" class="badge">0.0 /—Å–µ–∫</div>
</div>

<div id="center">
  <div id="reactor">
    <img src="assets/reactor/reactor.gif" alt="Reactor">
  </div>
</div>

<div id="bottom">
  <div id="bar">
    <div class="btn" onclick="openFleet()">üöÄ –§–õ–û–¢</div>
    <div class="btn" onclick="openCrew()">üë• –≠–ö–ò–ü–ê–ñ</div>
    <div class="btn" onclick="openImplants()">üß† –ò–ú–ü–õ–ê–ù–¢–´</div>
    <div class="btn" onclick="openRaid()">‚öîÔ∏è –†–ï–ô–î</div>
    <div class="btn" onclick="openMarket()">üõí –ú–ê–ì–ê–ó–ò–ù</div>
    <div class="btn" onclick="openProfile()">üë§ –ü–†–û–§–ò–õ–¨</div>
    <div class="btn" onclick="openSettings()">‚öôÔ∏è</div>
  </div>
</div>

</div>

<div id="pop" onclick="if(event.target===this)closePop()">
  <div id="card"></div>
</div>

<script>
Telegram.WebApp.ready();
Telegram.WebApp.expand();

const RANKS = ["Street Rat","Neon Scavenger","Void Pirate","Cyber Overlord","Galaxy Baron"];

const SHIPS = [
  {id:1,name:"Rusty Drone",desc:"–°–ø–∏—Å–∞–Ω–Ω—ã–π –¥—Ä–æ–Ω –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏",cost:100,income:5},
  {id:2,name:"Scrap Fighter",desc:"–°–æ–±—Ä–∞–Ω –∏–∑ –æ–±–ª–æ–º–∫–æ–≤",cost:500,income:20},
  {id:3,name:"Punk Hauler",desc:"–ö–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥–∏—Å—Ç—Å–∫–∏–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç",cost:2000,income:80},
  {id:4,name:"Neon Corsair",desc:"–ö–æ—Ä–∞–±–ª—å –ø–∏—Ä–∞—Ç—Å–∫–æ–π —ç–ª–∏—Ç—ã",cost:10000,income:300},
  {id:5,name:"Void Reaper",desc:"–ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–π –∫–ª–∞—Å—Å. –õ–µ–≥–µ–Ω–¥–∞",cost:50000,income:1000},
  {id:6,name:"Glitch Phantom",desc:"–ù–µ–≤–∏–¥–∏–º—ã–π –¥–ª—è —Ä–∞–¥–∞—Ä–æ–≤",cost:150000,income:2500},
  {id:7,name:"Nova Destroyer",desc:"–ë—ã–≤—à–∏–π —Ñ–ª–∞–≥–º–∞–Ω NovaCore",cost:500000,income:8000},
  {id:8,name:"Black Hole Raider",desc:"–ü–æ–≥–ª–æ—â–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é –≤—Ä–∞–≥–æ–≤",cost:2000000,income:25000},
  {id:9,name:"Quantum Leviathan",desc:"–†–∞–∑—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ",cost:10000000,income:100000},
  {id:10,name:"Punk Sovereign",desc:"–¢—Ä–æ–Ω –≥–∞–ª–∞–∫—Ç–∏–∫–∏",cost:50000000,income:500000}
];

const IMPLANTS = [
  {key:"base",name:"–ë–∞–∑–æ–≤—ã–π –ò–º–ø–ª–∞–Ω—Ç",desc:"–ü–µ—Ä–≤—ã–π —à–∞–≥ –ª—é–±–æ–≥–æ –ø–∞–Ω–∫–∞. –ö–∞–∂–¥–∞—è –ª–µ–≥–µ–Ω–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –¥–µ—à—ë–≤–æ–≥–æ –∞–ø–≥—Ä–µ–π–¥–∞.",cost:50,income:2},
  {key:"chip",name:"–†–∂–∞–≤—ã–π –ß–∏–ø",desc:"–î–µ—à—ë–≤—ã–π, —Å—Ç–∞—Ä—ã–π, –æ–ø–∞—Å–Ω—ã–π. –ù–æ –∏–Ω–æ–≥–¥–∞ –∏–º–µ–Ω–Ω–æ –æ–Ω –¥–∞—ë—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞.",cost:300,income:10},
  {key:"eye",name:"–ö–∏–±–µ—Ä-–ì–ª–∞–∑",desc:"–í–æ–µ–Ω–Ω—ã–π –∏–º–ø–ª–∞–Ω—Ç —Ä–∞–∑–≤–µ–¥–∫–∏. –í–∏–¥–∏—Ç —Å–ª–∞–±—ã–µ –º–µ—Å—Ç–∞, —Å–∫—Ä—ã—Ç—ã–µ —Å–∏–≥–Ω–∞–ª—ã –∏ —à–∞–Ω—Å—ã.",cost:1500,income:40},
  {key:"glitch",name:"–ì–ª–∏—Ç—á-–ü—Ä–æ—Ç–µ–∑",desc:"–°–æ–∑–¥–∞–Ω —Ö–∞–∫–µ—Ä–∞–º–∏ –ø–æ–¥–ø–æ–ª—å—è. –î–∞—ë—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —É—Å–∏–ª–µ–Ω–∏—è, –∫—Ä–∏—Ç—ã –∏ —Å–±–æ–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞.",cost:8000,income:150},
  {key:"neuro",name:"–ù–µ–æ-–ù–µ–π—Ä–æ–Ω",desc:"–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ: –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏ NeonCorp. –£—Å–∫–æ—Ä—è–µ—Ç –º—ã—à–ª–µ–Ω–∏–µ –¥–æ —É—Ä–æ–≤–Ω—è –ò–ò.",cost:40000,income:600}
];

const CREW = [
  {key:"captain",name:"–ö–∞–ø–∏—Ç–∞–Ω –ö–æ—Å–º–æ",desc:"–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —Å—Ç—Ä–∞—Ç–µ–≥. –£—Å–∏–ª–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –≤—Å–µ–≥–æ —Ñ–ª–æ—Ç–∞ –Ω–∞ 50%. ¬´–ì–∞–ª–∞–∫—Ç–∏–∫–∞ ‚Äî —ç—Ç–æ —à–∞—Ö–º–∞—Ç–Ω–∞—è –¥–æ—Å–∫–∞.¬ª",cost:20000},
  {key:"hacker",name:"–õ–∏—Å–∞-–•–∞–∫–µ—Ä",desc:"–¶–∏—Ñ—Ä–æ–≤–æ–π –ø—Ä–∏–∑—Ä–∞–∫. –î–∞—ë—Ç 15% —à–∞–Ω—Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–∞–ø–∞ (x2 PUNK). ¬´–ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –≥–æ–≤–æ—Ä–∏—Ç ‚Äú–Ω–µ—Ç‚Äù ‚Äî –∑–Ω–∞—á–∏—Ç, —Ç—ã –∑–∞–¥–∞–µ—à—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å.¬ª",cost:50000},
  {key:"bot",name:"–ì–∏–≥–∞–ü–∞–Ω–∫-–ë–æ—Ç",desc:"–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π —é–Ω–∏—Ç. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–∞–ø–∞–µ—Ç 2 —Ä–∞–∑–∞ –≤ —Å–µ–∫—É–Ω–¥—É. ¬´–¶–µ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∞: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å CosmoPunk.¬ª",cost:150000}
];

let save = JSON.parse(localStorage.getItem("cosmopunk_save")) || {
  punk:0,
  totalPunk:0,
  passiveIncome:0,
  rank:0,
  ships:{},
  implants:{},
  crew:{},
  lastUpdate:Date.now()
};

save.ships = save.ships || {};
save.implants = save.implants || {};
save.crew = save.crew || {};

// –≠–ª–µ–º–µ–Ω—Ç—ã UI
const punkEl = document.getElementById("punk-badge");
const incomeEl = document.getElementById("income-badge");
const rankEl = document.getElementById("rank");
const reactor = document.getElementById("reactor");
const pop = document.getElementById("pop");
const card = document.getElementById("card");

// –†–∞—Å—á—ë—Ç –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞ —Å —É—á—ë—Ç–æ–º —ç–∫–∏–ø–∞–∂–∞
function calculatePassive() {
  let shipIncome = 0;
  SHIPS.forEach(ship => {
    const count = save.ships[ship.id] || 0;
    shipIncome += ship.income * count;
  });

  let implantIncome = 0;
  IMPLANTS.forEach(imp => {
    if (save.implants[imp.key]) implantIncome += imp.income;
  });

  let mult = save.crew["captain"] ? 1.5 : 1;
  save.passiveIncome = shipIncome * mult + implantIncome;
}

// –û—Ñ—Ñ–ª–∞–π–Ω-–ø—Ä–æ–≥—Ä–µ—Å—Å
function calculateOffline() {
  const now = Date.now();
  const diffSec = (now - save.lastUpdate) / 1000;
  const earned = save.passiveIncome * diffSec;
  save.punk += earned;
  save.totalPunk += earned;
  save.lastUpdate = now;
}
calculateOffline();
calculatePassive();

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
function updateUI() {
  punkEl.textContent = Math.floor(save.punk).toLocaleString() + " PUNK";
  incomeEl.textContent = save.passiveIncome.toFixed(1) + " /—Å–µ–∫";
  
  // –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–Ω–≥–æ–≤
  const thresholds = [0, 1000, 10000, 50000, 200000, 1000000000];
  save.rank = 0;
  for (let i = thresholds.length - 1; i >= 0; i--) {
    if (save.totalPunk >= thresholds[i]) {
      save.rank = i;
      break;
    }
  }
  rankEl.textContent = RANKS[save.rank];
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
function saveGame() {
  save.lastUpdate = Date.now();
  localStorage.setItem("cosmopunk_save", JSON.stringify(save));
}

// –¢–∞–ø –ø–æ —Ä–µ–∞–∫—Ç–æ—Ä—É
reactor.onclick = e => {
  let amount = 1;
  let crit = false;

  if (save.crew["hacker"] && Math.random() < 0.15) {
    amount = 2;
    crit = true;
  }

  save.punk += amount;
  save.totalPunk += amount;

  // –ü–ª–∞–≤–∞—é—â–∏–π —Ç–µ–∫—Å—Ç
  const float = document.createElement("div");
  float.className = "float" + (crit ? " crit" : "");
  float.textContent = "+" + amount;
  float.style.left = (e.clientX - 30) + "px";
  float.style.top = (e.clientY - 40) + "px";
  document.body.appendChild(float);
  setTimeout(() => float.remove(), 1400);

  // –ê–Ω–∏–º–∞—Ü–∏—è –∏ –≤–∏–±—Ä–∞—Ü–∏—è
  reactor.classList.add("tap");
  setTimeout(() => reactor.classList.remove("tap"), 400);
  if (Telegram.WebApp.HapticFeedback) {
    Telegram.WebApp.HapticFeedback.impactOccurred(crit ? "heavy" : "medium");
  }

  updateUI();
  saveGame();
};

// –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥
setInterval(() => {
  save.punk += save.passiveIncome / 10;
  save.totalPunk += save.passiveIncome / 10;
  updateUI();
  saveGame();
}, 100);

// –ê–≤—Ç–æ—Ç–∞–ø –æ—Ç –±–æ—Ç–∞
setInterval(() => {
  if (save.crew["bot"]) {
    save.punk += 2;
    save.totalPunk += 2;
    updateUI();
    saveGame();
  }
}, 1000);

// –ü–æ–ø–∞–ø
function showPopup(html) {
  card.innerHTML = html;
  pop.style.display = "flex";
}
function closePop() {
  pop.style.display = "none";
}

/* ===== –§–õ–û–¢ ===== */
function openFleet() {
  let html = `<h2>üöÄ –§–õ–û–¢</h2>`;
  SHIPS.forEach(ship => {
    const count = save.ships[ship.id] || 0;
    if (count > 0) {
      const totalIncome = ship.income * count * (save.crew["captain"] ? 1.5 : 1);
      html += `<div class="item">
        <img src="assets/ships/ship${ship.id}.png">
        <div class="item-info">
          <div class="item-name">${ship.name}</div>
          <div class="item-desc">+${totalIncome.toFixed(1)} /—Å–µ–∫ \( {count > 1 ? `(x \){count})` : ""}</div>
        </div>
      </div>`;
    } else {
      const canBuy = save.punk >= ship.cost;
      html += `<div class="item">
        <img src="assets/ships/ship${ship.id}.png">
        <div class="item-info">
          <div class="item-name">${ship.name}</div>
          <div class="item-desc">${ship.desc}<br>–°—Ç–æ–∏–º–æ—Å—Ç—å: \( {ship.cost.toLocaleString()} PUNK<br>–î–æ—Ö–æ–¥: + \){ship.income} /—Å–µ–∫</div>
        </div>
        <button class="buy-btn" \( {!canBuy ? "disabled" : ""} onclick="buyShip( \){ship.id})">–ö–£–ü–ò–¢–¨</button>
      </div>`;
    }
  });
  showPopup(html);
}
function buyShip(id) {
  const ship = SHIPS.find(s => s.id === id);
  if (save.punk < ship.cost) return;
  save.punk -= ship.cost;
  save.ships[id] = (save.ships[id] || 0) + 1;
  calculatePassive();
  updateUI();
  saveGame();
  openFleet();
}

/* ===== –ò–ú–ü–õ–ê–ù–¢–´ ===== */
function openImplants() {
  let html = `<h2>üß† –ò–ú–ü–õ–ê–ù–¢–´</h2>`;
  IMPLANTS.forEach(imp => {
    if (save.implants[imp.key]) {
      html += `<div class="item">
        <img src="assets/implants/${imp.key}.png">
        <div class="item-info">
          <div class="item-name">${imp.name}</div>
          <div class="item-desc">–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (+${imp.income} /—Å–µ–∫)</div>
        </div>
      </div>`;
    } else {
      const canBuy = save.punk >= imp.cost;
      html += `<div class="item">
        <img src="assets/implants/${imp.key}.png">
        <div class="item-info">
          <div class="item-name">${imp.name}</div>
          <div class="item-desc">${imp.desc}<br>–°—Ç–æ–∏–º–æ—Å—Ç—å: \( {imp.cost.toLocaleString()} PUNK<br>–î–æ—Ö–æ–¥: + \){imp.income} /—Å–µ–∫</div>
        </div>
        <button class="buy-btn" \( {!canBuy ? "disabled" : ""} onclick="buyImplant(' \){imp.key}')">–ö–£–ü–ò–¢–¨</button>
      </div>`;
    }
  });
  showPopup(html);
}
function buyImplant(key) {
  const imp = IMPLANTS.find(i => i.key === key);
  if (save.punk < imp.cost) return;
  save.punk -= imp.cost;
  save.implants[key] = true;
  calculatePassive();
  updateUI();
  saveGame();
  openImplants();
}

/* ===== –≠–ö–ò–ü–ê–ñ ===== */
function openCrew() {
  let html = `<h2>üë• –≠–ö–ò–ü–ê–ñ</h2>`;
  CREW.forEach(member => {
    if (save.crew[member.key]) {
      html += `<div class="item">
        <img src="assets/crew/${member.key}.png">
        <div class="item-info">
          <div class="item-name">${member.name}</div>
          <div class="item-desc">–ù–∞–Ω—è—Ç<br>–≠—Ñ—Ñ–µ–∫—Ç –∞–∫—Ç–∏–≤–µ–Ω</div>
        </div>
      </div>`;
    } else {
      const canBuy = save.punk >= member.cost;
      html += `<div class="item">
        <img src="assets/crew/${member.key}.png">
        <div class="item-info">
          <div class="item-name">${member.name}</div>
          <div class="item-desc">${member.desc}<br>–°—Ç–æ–∏–º–æ—Å—Ç—å: ${member.cost.toLocaleString()} PUNK</div>
        </div>
        <button class="buy-btn" \( {!canBuy ? "disabled" : ""} onclick="buyCrew(' \){member.key}')">–ù–ê–ù–Ø–¢–¨</button>
      </div>`;
    }
  });
  showPopup(html);
}
function buyCrew(key) {
  const member = CREW.find(m => m.key === key);
  if (save.punk < member.cost) return;
  save.punk -= member.cost;
  save.crew[key] = true;
  calculatePassive();
  updateUI();
  saveGame();
  openCrew();
}

/* ===== –û–°–¢–ê–õ–¨–ù–´–ï –†–ê–ó–î–ï–õ–´ ===== */
function openRaid() { showPopup("<h2>‚öîÔ∏è –†–ï–ô–î</h2><p>–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ—Ç–∏–≤ –º–µ–≥–∞–∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–π.<br>–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ ‚Äî —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º —Å –Ω–∞–≥—Ä–∞–¥–∞–º–∏.</p>"); }
function openMarket() { showPopup("<h2>üõí –ú–ê–ì–ê–ó–ò–ù</h2><p>–ë—É—Å—Ç–µ—Ä—ã, —É—Å–∏–ª–µ–Ω–∏—è –∏ –ø—Ä–µ–º–∏—É–º-–∞–ø–≥—Ä–µ–π–¥—ã.<br>–°–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è.</p>"); }
function openSettings() { showPopup("<h2>‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò</h2><p>–Ø–∑—ã–∫, –∑–≤—É–∫, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Äî –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.</p>"); }

function openProfile() {
  let html = `<h2>üë§ –ü–†–û–§–ò–õ–¨ COSMOPUNK</h2>
    <p><strong>–†–∞–Ω–≥:</strong> ${RANKS[save.rank]}</p>
    <p><strong>–í—Å–µ–≥–æ –¥–æ–±—ã—Ç–æ:</strong> ${Math.floor(save.totalPunk).toLocaleString()} PUNK</p>
    <h3 style="margin:24px 0 12px;color:var(--accent1)">üöÄ –§–ª–æ—Ç</h3>`;
  Object.keys(save.ships).forEach(id => {
    const count = save.ships[id];
    html += `<img src="assets/ships/ship${id}.png" width="68" style="margin:6px">`;
    if (count > 1) html += `<sup style="color:var(--accent2)">x${count}</sup> `;
  });
  html += `<h3 style="margin:24px 0 12px;color:var(--accent1)">üß† –ò–º–ø–ª–∞–Ω—Ç—ã</h3>`;
  Object.keys(save.implants).forEach(key => {
    html += `<img src="assets/implants/${key}.png" width="68" style="margin:6px"> `;
  });
  html += `<h3 style="margin:24px 0 12px;color:var(--accent1)">üë• –≠–∫–∏–ø–∞–∂</h3>`;
  Object.keys(save.crew).forEach(key => {
    html += `<img src="assets/crew/${key}.png" width="68" style="margin:6px"> `;
  });
  showPopup(html);
}

updateUI();
</script>
</body>
</html>